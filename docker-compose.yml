version: '3.8'

services:
  audiochangerr:
    image: audiochangerr:latest
    container_name: audiochangerr
    restart: unless-stopped

    # SECURITY: Bind to specific IP (recommended)
    # Replace 192.168.1.50 with your server IP
    ports:
      - "192.168.1.50:4444:4444"
    # Alternatives:
    # - "127.0.0.1:4444:4444"  # Localhost only (requires reverse proxy)
    # - "4444:4444"             # All interfaces (relies on config.yaml IP filtering)

    volumes:
      # REQUIRED: Config file (create from config.yaml.example)
      - ./config.yaml:/config/config.yaml:ro
      # Optional: Log directory (if logging.enabled in config.yaml)
      - ./logs:/logs

    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:4444/health"]
      interval: 30s
      timeout: 10s
      retries: 3
