# Audiochangerr Configuration Example
# Copy to config.yaml and customize
# Full reference: CONFIGURATION.md

config_version: 1

plex_server_url: "http://192.168.1.100:32400"
plex_token: "YOUR_PLEX_TOKEN_HERE"
owner_username: "your-plex-username"

mode: "polling"
dry_run: true
terminate_stream: true  # Terminate session after switching audio stream (client auto-restarts)
validation_timeout_seconds: 120

# Console output (required)
console:
  enabled: true
  level: "info"

# File logging (optional, disabled by default)
# logging:
#   enabled: true
#   directory: "/logs"
#   max_size: "20m"
#   max_files: "14d"
#   level: "info"

# Polling mode settings
check_interval: 10

# Webhook mode settings
webhook:
  port: 4444
  host: "0.0.0.0"
  path: "/webhook"
  local_only: true
  allowed_networks:
    - "127.0.0.0/8"
    - "192.168.0.0/16"
    - "10.0.0.0/8"
    - "172.16.0.0/12"
    - "::1/128"
  secret: ""
  initial_delay_ms: 0
  session_retry:
    max_attempts: 3
    initial_delay_ms: 500

# Audio selection (top to bottom, first match wins)
audio_selector:
  # AC3 5.1 original language, no commentary
  - codec: "ac3"
    channels: 6
    language: "original"
    keywords_exclude: ["Commentary", "Director"]

  # AAC stereo fallback
  - codec: "aac"
    channels: 2
    language: "original"

  # DTS-HD Master Audio
  - codec: "dts-hd"
    channels: 6
    language: "original"
    keywords_include: ["MA", "Master"]

  # English AC3 5.1
  - codec: "ac3"
    channels: 6
    language: "eng"

  # Any stereo track
  - codec: "aac"
    channels: 2
